<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Systemly - Login & Signup</title>
<link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;600;700;900&family=Sarabun:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous">

<style>
/* ‚Äî‚Äî‚Äî‚Äî‚Äî Global Styles ‚Äî‚Äî‚Äî‚Äî‚Äî */
* { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --primary: #F97316;
  --orange-dark: #EA580C;
  --white: #FFFFFF;
  --gray-light: #F8FAFC;
  --gray: #64748B;
  --gray-dark: #334155;
  --error: #EF4444;
  --success: #10B981;
  --border: #E2E8F0;
}

body {
  font-family: 'Sarabun', sans-serif;
  background: var(--white);
  color: var(--gray-dark);
  line-height: 1.6;
  min-height: 100vh;
  opacity: 0;
  transition: opacity 0.5s ease;
  overflow-x: hidden;
}

body.loaded { opacity: 1; }

h1,h2,h3,h4 { font-family: 'Archivo', sans-serif; }



/* ‚Äî‚Äî‚Äî‚Äî‚Äî Navigation ‚Äî‚Äî‚Äî‚Äî‚Äî */
nav {
  position: fixed;
  top: 0;
  width: 100%;
  padding: 1.5rem 5%;
  background: var(--white);
  border-bottom: 1px solid var(--border);
  z-index: 1000;
  animation: slideDown 0.6s ease-out;
}

@keyframes slideDown {
  from { transform: translateY(-100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.nav-container {
  max-width: 1400px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  font-family: 'Archivo', sans-serif;
  font-size: 2rem;
  font-weight: 900;
  color: var(--primary);
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  position: relative;
}

.logo::before {
  content: '';
  position: absolute;
  inset: -5px;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  border-radius: 50%;
  filter: blur(20px);
  opacity: 0;
  transition: opacity 0.3s;
}

.logo:hover::before {
  opacity: 0.3;
}

.nav-back {
  color: var(--gray-dark);
  text-decoration: none;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1.5rem;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--white);
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.nav-back::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  opacity: 0;
  transition: opacity 0.3s;
}

.nav-back:hover {
  color: var(--white);
  border-color: transparent;
  transform: translateX(-5px);
}

.nav-back:hover::before {
  opacity: 1;
}

.nav-back span {
  position: relative;
  z-index: 1;
}

/* ‚Äî‚Äî‚Äî‚Äî‚Äî Auth Container ‚Äî‚Äî‚Äî‚Äî‚Äî */
.auth-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8rem 5% 4rem;
  position: relative;
  z-index: 1;
}

.auth-wrapper {
  display: grid;
  grid-template-columns: 1fr 1fr;
  max-width: 1100px;
  width: 100%;
  background: var(--white);
  border-radius: 0;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  animation: slideUp 0.8s ease-out;
  border: 1px solid var(--border);
  min-height: 600px;
}

@keyframes slideUp {
  from { opacity: 0; transform: translateY(80px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ‚Äî‚Äî‚Äî‚Äî‚Äî Form Side ‚Äî‚Äî‚Äî‚Äî‚Äî */
.auth-form-side {
  padding: 3rem 4rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  position: relative;
  background: var(--white);
}


.auth-form-side h2 {
  font-size: 2.8rem;
  font-weight: 900;
  margin-bottom: 0.5rem;
  position: relative;
  z-index: 1;
}

.gradient-text {
  color: var(--primary);
}

.auth-subtitle {
  color: var(--gray);
  margin-bottom: 2.5rem;
  font-size: 1.1rem;
  position: relative;
  z-index: 1;
}

/* Form Fields */
.form-group {
  margin-bottom: 1.5rem;
  position: relative;
  z-index: 1;
}

.form-label {
  display: block;
  margin-bottom: 0.6rem;
  font-weight: 600;
  color: var(--text);
  font-size: 0.95rem;
}

.form-input-wrapper {
  position: relative;
}

.form-input {
  width: 100%;
  padding: 0.9rem 1rem 0.9rem 3rem;
  background: var(--white);
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: 1rem;
  color: var(--gray-dark);
  transition: all 0.3s;
  font-family: 'Sarabun', sans-serif;
}

.form-input::placeholder {
  color: var(--gray);
}

.form-input:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
  outline: none;
  background: var(--white);
}

.form-input.error {
  border-color: var(--error);
  animation: shake 0.5s;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  75% { transform: translateX(10px); }
}

.form-icon {
  position: absolute;
  left: 1.1rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--gray);
  transition: color 0.3s;
  z-index: 1;
}

.form-input:focus + .form-icon {
  color: var(--primary);
}

.password-toggle {
  position: absolute;
  right: 1.1rem;
  top: 50%;
  transform: translateY(-50%);
  border: none;
  background: none;
  cursor: pointer;
  color: var(--gray);
  transition: all 0.3s;
  padding: 0.5rem;
  border-radius: 50%;
  z-index: 2;
}

.password-toggle:hover {
  color: var(--primary);
  background: rgba(249, 115, 22, 0.1);
}

/* Error Messages - Base Style */
.error-message {
  color: var(--error);
  font-size: 0.85rem;
  margin-top: 0.5rem;
  display: none;
  align-items: center;
  gap: 0.3rem;
}

.error-message.show {
  display: flex;
  animation: fadeInUp 0.3s;
}

/* Enhanced ROLE selection error - More prominent */
#signupRoleError {
  color: #fff;
  font-size: 0.95rem;
  margin-top: 1rem;
  display: none;
  align-items: center;
  gap: 0.6rem;
  background: var(--error);
  padding: 1rem 1.2rem;
  border-radius: 12px;
  font-weight: 600;
  box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
}

#signupRoleError.show {
  display: flex;
  animation: shake 0.5s, fadeInUp 0.3s;
}

#signupRoleError i {
  font-size: 1.2rem;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(5px); }
  to { opacity: 1; transform: translateY(0); }
}

.checkbox-group {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  margin-bottom: 1.5rem;
}

.checkbox-group input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--primary);
  cursor: pointer;
}

.checkbox-group label {
  font-size: 0.95rem;
  color: var(--gray);
  cursor: pointer;
  user-select: none;
}

/* Buttons */
.btn-primary {
  width: 100%;
  padding: 1rem;
  background: var(--primary);
  color: #fff;
  border: none;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 10px 30px rgba(249, 115, 22, 0.4);
  position: relative;
  overflow: hidden;
  font-family: 'Sarabun', sans-serif;
}

.btn-primary::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--orange-dark);
  opacity: 0;
  transition: opacity 0.3s;
}

.btn-primary:hover {
  transform: translateY(-3px);
  box-shadow: 0 15px 40px rgba(249, 115, 22, 0.5);
}

.btn-primary:hover::before {
  opacity: 1;
}

.btn-primary span {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.btn-primary.loading {
  pointer-events: none;
}

.btn-primary.loading span {
  opacity: 0;
}

.btn-primary.loading::after {
  content: '';
  position: absolute;
  width: 24px;
  height: 24px;
  top: 50%;
  left: 50%;
  margin: -12px 0 0 -12px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.divider {
  display: flex;
  align-items: center;
  margin: 2rem 0;
  color: var(--gray);
  font-size: 0.9rem;
}

.divider::before,
.divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
}

.divider::before {
  margin-right: 1rem;
}

.divider::after {
  margin-left: 1rem;
}

.social-buttons {
  display: flex;
  gap: 1rem;
}

.btn-social {
  flex: 1;
  padding: 0.9rem;
  border: 1px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  background: var(--white);
  color: var(--gray-dark);
  font-size: 1rem;
  font-weight: 500;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  position: relative;
  overflow: hidden;
  font-family: 'Sarabun', sans-serif;
}

.btn-social::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  opacity: 0;
  transition: opacity 0.3s;
}

.btn-social:hover {
  border-color: transparent;
  transform: translateY(-3px);
  box-shadow: 0 10px 30px rgba(249, 115, 22, 0.3);
}

.btn-social:hover::before {
  opacity: 0.1;
}

.btn-social span {
  position: relative;
  z-index: 1;
}

/* Role Selection Cards */
.role-select-card {
  background: rgba(15, 23, 42, 0.5);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 1.5rem 1rem;
  text-align: center;
  transition: all 0.3s;
  cursor: pointer;
}

.role-select-card:hover {
  border-color: var(--primary);
  background: rgba(249, 115, 22, 0.05);
}

.role-select-card.selected {
  border-color: var(--primary);
  background: rgba(249, 115, 22, 0.1);
  box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.15);
}

.role-select-card i {
  font-size: 2rem;
  display: block;
  margin-bottom: 0.5rem;
  color: var(--gray);
  transition: color 0.3s;
}

.role-select-card.selected i {
  color: var(--primary);
}

.role-select-card span {
  display: block;
  font-weight: 600;
  color: var(--text);
}

/* Enhanced role selection error */
.form-group .error-message {
  color: var(--error);
  font-size: 0.9rem;
  margin-top: 0.8rem;
  display: none;
  align-items: center;
  gap: 0.5rem;
  background: rgba(239, 68, 68, 0.1);
  padding: 0.8rem 1rem;
  border-radius: 8px;
  border: 1px solid var(--error);
}

.form-group .error-message.show {
  display: flex;
  animation: shake 0.5s, fadeInUp 0.3s;
}

.form-group .error-message i {
  font-size: 1.1rem;
}

/* Add pulse effect to role cards when error shows */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-10px); }
  50% { transform: translateX(10px); }
  75% { transform: translateX(-10px); }
}















.switch-form {
  text-align: center;
  margin-top: 2rem;
  color: var(--gray);
}

.switch-form a {
  color: var(--primary);
  text-decoration: none;
  font-weight: 600;
  position: relative;
  transition: color 0.3s;
}

.switch-form a::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 0;
  height: 2px;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  transition: width 0.3s;
}

.switch-form a:hover {
  color: var(--secondary);
}

.switch-form a:hover::after {
  width: 100%;
}

/* ‚Äî‚Äî‚Äî‚Äî‚Äî Visual Side ‚Äî‚Äî‚Äî‚Äî‚Äî */
.auth-visual-side {
  background: var(--primary);
  padding: 4rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  color: var(--text);
  position: relative;
  overflow: hidden;
  border-left: 1px solid rgba(255, 255, 255, 0.1);
}

.auth-visual-side::before {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.05);
}

.visual-content {
  position: relative;
  z-index: 1;
}

.visual-icon {
  width: 100px;
  height: 100px;
  margin: 0 auto 2rem;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  color: white;
  box-shadow: 0 20px 60px rgba(249, 115, 22, 0.4);
  animation: float 6s infinite ease-in-out;
  transform-style: preserve-3d;
}

.visual-content h3 {
  font-size: 2.5rem;
  font-weight: 900;
  margin-bottom: 1rem;
  background: linear-gradient(135deg, var(--white), var(--gray));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.visual-content p {
  opacity: 0.85;
  line-height: 1.8;
  margin-bottom: 2rem;
  font-size: 1.1rem;
}

.feature-list {
  text-align: left;
  max-width: 400px;
  margin: 2rem auto 0;
}

.feature-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.2rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.3s;
}

.feature-item:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateX(5px);
}

.feature-icon {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  flex-shrink: 0;
}

.feature-text {
  font-size: 0.95rem;
  opacity: 0.9;
}

/* Success Message */
.success-message {
  display: none;
  background: linear-gradient(135deg, var(--success), var(--accent));
  color: #fff;
  padding: 1.2rem;
  border-radius: 15px;
  margin-bottom: 1.5rem;
  align-items: center;
  gap: 0.8rem;
  box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
  animation: slideInDown 0.5s ease-out;
}


/* Email Verification Notice */
.verification-notice {
  background: linear-gradient(135deg, #FCD34D, #F59E0B);
  color: var(--gray-dark);
  padding: 1rem 1.2rem;
  border-radius: 12px;
  margin-bottom: 1.5rem;
  display: none;
  align-items: center;
  gap: 0.8rem;
  font-weight: 500;
  border: 2px solid #F59E0B;
}

.verification-notice.show {
  display: flex;
  animation: slideInDown 0.5s ease-out;
}

.verification-notice i {
  font-size: 1.5rem;
}

.verification-notice .resend-link {
  color: var(--primary);
  text-decoration: underline;
  cursor: pointer;
  margin-left: 0.5rem;
  font-weight: 600;
}

.verification-notice .resend-link:hover {
  color: var(--orange-dark);
}







.success-message.show {
  display: flex;
}

@keyframes slideInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Form visibility */
.auth-form {
  display: none;
}

.auth-form.active {
  display: block;
  animation: fadeIn 0.5s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ‚Äî‚Äî‚Äî‚Äî‚Äî Responsive ‚Äî‚Äî‚Äî‚Äî‚Äî */
@media (max-width: 968px) {
  .auth-wrapper {
    grid-template-columns: 1fr;
  }
  
  .auth-visual-side {
    display: none;
  }
  
  .auth-form-side {
    padding: 2.5rem;
  }
  
  nav {
    padding: 1rem 5%;
  }
  
  .logo {
    font-size: 1.5rem;
  }
}

@media (max-width: 480px) {
  .auth-form-side {
    padding: 2rem;
  }
  
  .auth-form-side h2 {
    font-size: 2rem;
  }
  
  .btn-primary,
  .btn-social {
    padding: 1rem;
  }
}

/* Google Login Role Selection Modal */
.google-role-modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(8px);
  z-index: 9999;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease-out;
}

.google-role-modal.show {
  display: flex;
}

.google-role-content {
  background: var(--white);
  padding: 3rem;
  border-radius: 20px;
  max-width: 500px;
  width: 90%;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: slideUp 0.4s ease-out;
  border: 1px solid var(--border);
}

.google-role-content h3 {
  font-size: 2rem;
  margin-bottom: 1rem;
  color: var(--gray-dark);
  text-align: center;
}

.google-role-content p {
  color: var(--gray);
  margin-bottom: 2rem;
  text-align: center;
  font-size: 1.1rem;
}

.google-role-options {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.google-role-card {
  background: var(--gray-light);
  border: 2px solid var(--border);
  border-radius: 16px;
  padding: 2rem 1.5rem;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
}

.google-role-card:hover {
  border-color: var(--primary);
  background: rgba(249, 115, 22, 0.05);
  transform: translateY(-5px);
}

.google-role-card.selected {
  border-color: var(--primary);
  background: rgba(249, 115, 22, 0.1);
  box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.15);
}

.google-role-card i {
  font-size: 3rem;
  display: block;
  margin-bottom: 1rem;
  color: var(--gray);
  transition: color 0.3s;
}

.google-role-card.selected i {
  color: var(--primary);
}

.google-role-card span {
  display: block;
  font-weight: 600;
  font-size: 1.1rem;
  color: var(--gray-dark);
}

.google-role-actions {
  display: flex;
  gap: 1rem;
}

.google-role-actions button {
  flex: 1;
  padding: 1rem;
  border: none;
  border-radius: 10px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  font-family: 'Sarabun', sans-serif;
}

.btn-cancel-google {
  background: var(--gray-light);
  color: var(--gray-dark);
  border: 1px solid var(--border);
}

.btn-cancel-google:hover {
  background: var(--border);
}

.btn-confirm-google {
  background: var(--primary);
  color: white;
  box-shadow: 0 10px 30px rgba(249, 115, 22, 0.4);
}

.btn-confirm-google:hover {
  transform: translateY(-3px);
  box-shadow: 0 15px 40px rgba(249, 115, 22, 0.5);
}

.btn-confirm-google:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}







</style>
</head>
<body>


<nav>
  <div class="nav-container">
    <a href="index.html" class="logo">
      <i class="fa-solid fa-cube"></i>
      Systemly
    </a>
    <a href="javascript:void(0);" class="nav-back" onclick="history.back()">
      <span>
        <i class="fa-solid fa-arrow-left"></i> Back to Previous
      </span>
    </a>
  </div>
</nav>

<div class="auth-container">
  <div class="auth-wrapper">
    
    <div class="auth-form-side">
      <!-- LOGIN FORM -->
      <form id="loginForm" class="auth-form active">
        <h2>Welcome <span class="gradient-text" data-text="Back">Back</span></h2>
        <p class="auth-subtitle">Log in to access your Systemly account</p>
        <div class="success-message" id="loginSuccess">
          <i class="fa-solid fa-circle-check"></i>
          <span>Login successful! Redirecting...</span>
        </div>

<div class="verification-notice" id="verificationNotice">
  <i class="fa-solid fa-triangle-exclamation"></i>
  <span>Please verify your email to continue. <a class="resend-link" id="resendVerification">Resend verification email</a></span>
</div>



        <div class="form-group">
          <label class="form-label">Email Address</label>
          <div class="form-input-wrapper">
            <input type="email" class="form-input" id="loginEmail" placeholder="you@example.com" required>
            <i class="fa-solid fa-envelope form-icon"></i>
          </div>
          <span class="error-message" id="loginEmailError">
            <i class="fa-solid fa-circle-exclamation"></i>
            Please enter a valid email
          </span>
        </div>

        <div class="form-group">
          <label class="form-label">Password</label>
          <div class="form-input-wrapper">
            <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
            <i class="fa-solid fa-lock form-icon"></i>
            <button type="button" class="password-toggle" id="loginPasswordToggle">
              <i class="fa-solid fa-eye"></i>
            </button>
          </div>
          <span class="error-message" id="loginPasswordError">
            <i class="fa-solid fa-circle-exclamation"></i>
            Password is required
          </span>
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="rememberMe">
          <label for="rememberMe">Remember me</label>
        </div>

        <button type="submit" class="btn-primary">
          <span>
            <i class="fa-solid fa-right-to-bracket"></i>
            Log In
          </span>
        </button>

        <div class="divider">or continue with</div>

        <div class="social-buttons">
          <button type="button" class="btn-social" id="googleLogin">
            <span>
              <i class="fa-brands fa-google"></i>
              Google
            </span>
          </button>
        </div>

        <div class="switch-form">
          Don't have an account? <a href="#" id="switchToSignupBtn">Sign up</a>
        </div>
      </form>

      <!-- SIGNUP FORM --><!-- Replace the SIGNUP FORM section in your login.html with this: -->

<!-- SIGNUP FORM -->
<form id="signupForm" class="auth-form">
  <h2>Create Your <span class="gradient-text" data-text="Account">Account</span></h2>
  <p class="auth-subtitle">Join thousands of entrepreneurs on Systemly</p>
  <div class="success-message" id="signupSuccess">
    <i class="fa-solid fa-circle-check"></i>
    <span>Account created! Setting up your profile...</span>
  </div>

<div class="success-message" id="verificationSent" style="background: linear-gradient(135deg, #3B82F6, #2563EB);">
  <i class="fa-solid fa-envelope-circle-check"></i>
  <span>Verification email sent! Please check your inbox.</span>
</div>









  <!-- Role Selection -->
  <div class="form-group">
    <label class="form-label">I want to</label>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
      <label style="cursor: pointer;">
        <input type="radio" name="signupRole" value="buyer" id="signupRoleBuyer" required style="display: none;">
        <div class="role-select-card" data-role="buyer" onclick="selectSignupRole('buyer')">
          <i class="fa-solid fa-cart-shopping"></i>
          <span>Buy Systems</span>
        </div>
      </label>
      <label style="cursor: pointer;">
        <input type="radio" name="signupRole" value="seller" id="signupRoleSeller" required style="display: none;">
        <div class="role-select-card" data-role="seller" onclick="selectSignupRole('seller')">
          <i class="fa-solid fa-store"></i>
          <span>Sell Systems</span>
        </div>
      </label>
    </div>
    <span class="error-message" id="signupRoleError">
      <i class="fa-solid fa-circle-exclamation"></i>
      Please select your account type
    </span>
  </div>

  <div class="form-group">
    <label class="form-label">Full Name</label>
    <div class="form-input-wrapper">
      <input type="text" class="form-input" id="signupName" placeholder="John Doe" required>
      <i class="fa-solid fa-user form-icon"></i>
    </div>
    <span class="error-message" id="signupNameError">
      <i class="fa-solid fa-circle-exclamation"></i>
      Name is required
    </span>
  </div>

  <div class="form-group">
    <label class="form-label">Email Address</label>
    <div class="form-input-wrapper">
      <input type="email" class="form-input" id="signupEmail" placeholder="you@example.com" required>
      <i class="fa-solid fa-envelope form-icon"></i>
    </div>
    <span class="error-message" id="signupEmailError">
      <i class="fa-solid fa-circle-exclamation"></i>
      Please enter a valid email
    </span>
  </div>

  <div class="form-group">
    <label class="form-label">Password</label>
    <div class="form-input-wrapper">
      <input type="password" class="form-input" id="signupPassword" placeholder="Minimum 8 characters" required>
      <i class="fa-solid fa-lock form-icon"></i>
      <button type="button" class="password-toggle" id="signupPasswordToggle">
        <i class="fa-solid fa-eye"></i>
      </button>
    </div>
    <span class="error-message" id="signupPasswordError">
      <i class="fa-solid fa-circle-exclamation"></i>
      Password must be at least 8 characters
    </span>
  </div>

  <button type="submit" class="btn-primary">
    <span>
      <i class="fa-solid fa-user-plus"></i>
      Create Account
    </span>
  </button>

  <div class="switch-form">
    Already have an account? <a href="#" id="switchToLoginBtn">Log in</a>
  </div>
</form>
    </div>

    <div class="auth-visual-side">
      <div class="visual-content">
        <div class="visual-icon">
          <i class="fa-solid fa-rocket"></i>
        </div>
        <h3>Start Your Journey</h3>
        <p>Join the premier marketplace for digital systems and automation workflows</p>
        
        <div class="feature-list">
          <div class="feature-item">
            <div class="feature-icon">
              <i class="fa-solid fa-shield-halved"></i>
            </div>
            <div class="feature-text">Secure & verified transactions</div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <i class="fa-solid fa-chart-line"></i>
            </div>
            <div class="feature-text">Track your listings & analytics</div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <i class="fa-solid fa-users"></i>
            </div>
            <div class="feature-text">Connect with qualified buyers</div>
          </div>
          <div class="feature-item">
            <div class="feature-icon">
              <i class="fa-solid fa-crown"></i>
            </div>
            <div class="feature-text">Premium support & resources</div>
          </div>
        </div>
      </div>
    </div>

  </div>
<!-- Google Login Role Selection Modal -->
<div class="google-role-modal" id="googleRoleModal">
  <div class="google-role-content">
    <h3>Welcome! üëã</h3>
    <p>Please select what you want to do on Systemly</p>
    
    <div class="google-role-options">
      <div class="google-role-card" data-role="buyer" onclick="selectGoogleRole('buyer')">
        <i class="fa-solid fa-cart-shopping"></i>
        <span>Buy Systems</span>
      </div>
      <div class="google-role-card" data-role="seller" onclick="selectGoogleRole('seller')">
        <i class="fa-solid fa-store"></i>
        <span>Sell Systems</span>
      </div>
    </div>
    
    <div class="google-role-actions">
      <button type="button" class="btn-cancel-google" onclick="cancelGoogleLogin()">
        Cancel
      </button>
      <button type="button" class="btn-confirm-google" id="confirmGoogleRole" disabled>
        Continue
      </button>
    </div>
  </div>
</div>
</div>




<!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
  getAuth, 
  signInWithEmailAndPassword, 
  createUserWithEmailAndPassword, 
  onAuthStateChanged, 
  GoogleAuthProvider, 
  signInWithPopup,
  signOut,
  setPersistence,
  browserLocalPersistence,
  updateProfile,
  sendEmailVerification
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

import { 
  getFirestore, 
  doc, 
  setDoc,
  getDoc,
  serverTimestamp
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// ==========================================
// Firebase Config
// ==========================================
const firebaseConfig = {
  apiKey: "AIzaSyD3PQ5oWrzAXOHnb7wrmpRhL9DWIB7w9rE",
  authDomain: "systemly-db.firebaseapp.com",
  projectId: "systemly-db",
  storageBucket: "systemly-db.firebasestorage.app",
  messagingSenderId: "32599486733",
  appId: "1:32599486733:web:16d34643c8f920a6fd8044"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Set persistence
setPersistence(auth, browserLocalPersistence);


// FAST AUTH CHECK - Before page loads (REPLACE THE EXISTING ONE)
let authCheckComplete = false;

onAuthStateChanged(auth, async (user) => {
  if (!authCheckComplete) {
    authCheckComplete = true;
    if (user) {
      // Check if profile is complete
      const userDocRef = doc(db, 'users', user.uid);
      const userDoc = await getDoc(userDocRef);
      
      if (userDoc.exists()) {
        const userData = userDoc.data();
        
        if (userData.profileComplete !== true) {
          // Redirect to profile setup
          window.location.replace("profile.html");
        } else {
          // Redirect to marketplace
          window.location.replace("marketplace.html");
        }
      } else {
        // No user document - redirect to profile setup
        window.location.replace("profile.html");
      }
    } else {
      // No user, show login page
      document.body.classList.add('loaded');
    }
  }
});

// Fallback: Show page after 500ms if auth check takes too long
setTimeout(() => {
  if (!authCheckComplete) {
    authCheckComplete = true;
    document.body.classList.add('loaded');
  }
}, 500);

// ==========================================
// Helper Functions
// ==========================================
function togglePasswordVisibility(inputId, toggleBtn) {
  const input = document.getElementById(inputId);
  const icon = toggleBtn.querySelector('i');
  if (input.type === 'password') {
    input.type = 'text';
    icon.classList.remove('fa-eye');
    icon.classList.add('fa-eye-slash');
  } else {
    input.type = 'password';
    icon.classList.remove('fa-eye-slash');
    icon.classList.add('fa-eye');
  }
}











function switchToSignup() {
  document.getElementById('loginForm').classList.remove('active');
  document.getElementById('signupForm').classList.add('active');
}

function switchToLogin() {
  document.getElementById('signupForm').classList.remove('active');
  document.getElementById('loginForm').classList.add('active');
}

// ==========================================
// Create User Document with Complete Data Structure
// ==========================================
async function createUserDocument(user, displayName) {
  const userDocRef = doc(db, 'users', user.uid);
  
  // Check if document already exists
  const userDoc = await getDoc(userDocRef);
  
  if (!userDoc.exists()) {
    const userData = {
      email: user.email,
      name: displayName || user.displayName || user.email.split('@')[0],
      role: 'seller',
      subscriptionPlan: 'free',
      createdAt: new Date().toISOString(),
      listings: {
        active: 0,
        total: 0
      },
      stats: {
        totalViews: 0,
        inquiries: 0,
        sales: 0,
        alerts: 0,
        savedSearches: 0
      },
      profile: {
        bio: '',
        company: '',
        website: '',
        phone: '',
        location: 'Quezon City, Metro Manila, PH',
        verified: false
      },
      status: 'active',
      photoURL: user.photoURL || null
    };
    
    await setDoc(userDocRef, userData);
    console.log('‚úÖ User document created with complete structure');
    return userData;
  } else {
    console.log('‚ÑπÔ∏è User document already exists');
    return userDoc.data();
  }
}

// ==========================================
// Event Listeners - Password Toggle
// ==========================================
document.getElementById('loginPasswordToggle').addEventListener('click', function() {
  togglePasswordVisibility('loginPassword', this);
});

document.getElementById('signupPasswordToggle').addEventListener('click', function() {
  togglePasswordVisibility('signupPassword', this);
});

// ==========================================
// Event Listeners - Form Switching
// ==========================================
document.getElementById('switchToSignupBtn').addEventListener('click', (e) => {
  e.preventDefault();
  switchToSignup();
});

document.getElementById('switchToLoginBtn').addEventListener('click', (e) => {
  e.preventDefault();
  switchToLogin();
});

// ==========================================
// LOGIN HANDLER
// ==========================================
// LOGIN HANDLER (REPLACE THE EXISTING ONE)
// LOGIN HANDLER WITH EMAIL VERIFICATION CHECK
document.getElementById('loginForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const email = document.getElementById("loginEmail").value.trim();
  const pass = document.getElementById("loginPassword").value;
  const btn = e.target.querySelector('.btn-primary');
  const emailError = document.getElementById('loginEmailError');
  const passwordError = document.getElementById('loginPasswordError');
  const verificationNotice = document.getElementById('verificationNotice');

  // Reset errors
  emailError.classList.remove('show');
  passwordError.classList.remove('show');
  verificationNotice.classList.remove('show');
  document.getElementById('loginEmail').classList.remove('error');
  document.getElementById('loginPassword').classList.remove('error');

  // Validation
  if (!email) {
    emailError.classList.add('show');
    document.getElementById('loginEmail').classList.add('error');
    return;
  }

  if (!pass) {
    passwordError.classList.add('show');
    document.getElementById('loginPassword').classList.add('error');
    return;
  }

  btn.classList.add('loading');

  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, pass);
    const user = userCredential.user;
    
    // Check if email is verified
    if (!user.emailVerified) {
      btn.classList.remove('loading');
      verificationNotice.classList.add('show');
      
      // Store user for resend function
      window.currentUnverifiedUser = user;
      
      console.log('‚ö†Ô∏è Email not verified');
      return;
    }
    
    // Check user document
    const userDocRef = doc(db, 'users', user.uid);
    const userDoc = await getDoc(userDocRef);
    
    if (userDoc.exists()) {
      const userData = userDoc.data();
      
      // Update emailVerified status in Firestore if needed
      if (userData.emailVerified !== true) {
        await setDoc(userDocRef, { emailVerified: true }, { merge: true });
      }
      
      // Check if suspended
      if (userData.status === 'suspended') {
        await signOut(auth);
        alert('‚ö†Ô∏è Your account has been suspended. Please contact support.');
        btn.classList.remove('loading');
        return;
      }
      
      // Check if profile is complete
      if (userData.profileComplete !== true) {
        document.getElementById('loginSuccess').classList.add('show');
        setTimeout(() => window.location.href = "profile.html", 1500);
        return;
      }
    }
    
    document.getElementById('loginSuccess').classList.add('show');
    setTimeout(() => window.location.href = "marketplace.html", 1500);
    
  } catch (err) {
    btn.classList.remove('loading');
    let errorMsg = "Login failed. Please check your credentials.";
    
    if (err.code === 'auth/user-not-found') {
      errorMsg = "No account found with this email.";
      emailError.textContent = errorMsg;
      emailError.classList.add('show');
      document.getElementById('loginEmail').classList.add('error');
    } else if (err.code === 'auth/wrong-password') {
      errorMsg = "Incorrect password.";
      passwordError.textContent = errorMsg;
      passwordError.classList.add('show');
      document.getElementById('loginPassword').classList.add('error');
    } else if (err.code === 'auth/invalid-email') {
      errorMsg = "Invalid email address.";
      emailError.textContent = errorMsg;
      emailError.classList.add('show');
      document.getElementById('loginEmail').classList.add('error');
    } else if (err.code === 'auth/too-many-requests') {
      errorMsg = "Too many failed attempts. Please try again later.";
      alert(errorMsg);
    } else {
      alert(errorMsg);
    }
    
    console.error('Login error:', err);
  }
});



// RESEND VERIFICATION EMAIL
document.getElementById('resendVerification').addEventListener('click', async (e) => {
  e.preventDefault();
  
  if (!window.currentUnverifiedUser) {
    alert('Please try logging in again.');
    return;
  }
  
  const link = e.target;
  link.textContent = 'Sending...';
  link.style.pointerEvents = 'none';
  
  try {
    await sendEmailVerification(window.currentUnverifiedUser, {
      url: window.location.origin + '/profile.html',
      handleCodeInApp: true
    });
    
    alert('‚úÖ Verification email sent! Please check your inbox.');
    link.textContent = 'Email sent!';
    
    setTimeout(() => {
      link.textContent = 'Resend verification email';
      link.style.pointerEvents = 'auto';
    }, 5000);
    
  } catch (err) {
    console.error('Resend error:', err);
    alert('Failed to resend email. Please try again.');
    link.textContent = 'Resend verification email';
    link.style.pointerEvents = 'auto';
  }
});












// Role selection for signup
let selectedSignupRole = null;

window.selectSignupRole = function(role) {
  selectedSignupRole = role;
  
  // Update UI
  document.querySelectorAll('.role-select-card').forEach(card => {
    card.classList.remove('selected');
  });
  document.querySelector(`.role-select-card[data-role="${role}"]`).classList.add('selected');
  
  // Update hidden radio
  document.getElementById(`signupRole${role.charAt(0).toUpperCase() + role.slice(1)}`).checked = true;
  
  // Hide error if visible
  const roleError = document.getElementById('signupRoleError');
  if (roleError) {
    roleError.classList.remove('show');
  }
};

// SIGNUP HANDLER WITH EMAIL VERIFICATION
document.getElementById('signupForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const email = document.getElementById("signupEmail").value.trim();
  const pass = document.getElementById("signupPassword").value;
  const name = document.getElementById("signupName").value.trim();
  const btn = e.target.querySelector('.btn-primary');
  
  const nameError = document.getElementById('signupNameError');
  const emailError = document.getElementById('signupEmailError');
  const passwordError = document.getElementById('signupPasswordError');
  const roleError = document.getElementById('signupRoleError');

  // Reset ALL errors first
  nameError.classList.remove('show');
  emailError.classList.remove('show');
  passwordError.classList.remove('show');
  roleError.classList.remove('show');
  document.getElementById('signupName').classList.remove('error');
  document.getElementById('signupEmail').classList.remove('error');
  document.getElementById('signupPassword').classList.remove('error');

  // Validation - CHECK ROLE FIRST
  if (!selectedSignupRole) {
    console.log('No role selected - showing error');
    roleError.classList.add('show');
    
    const roleContainer = document.querySelector('.role-select-card').parentElement.parentElement;
    roleContainer.scrollIntoView({ 
      behavior: 'smooth', 
      block: 'center' 
    });
    
    document.querySelectorAll('.role-select-card').forEach(card => {
      card.style.animation = 'shake 0.5s';
      setTimeout(() => { card.style.animation = ''; }, 500);
    });
    
    setTimeout(() => {
      if (!selectedSignupRole) {
        alert('‚ö†Ô∏è Please select your account type: Buyer or Seller');
      }
    }, 100);
    
    return;
  }
  
  if (!name) {
    nameError.classList.add('show');
    document.getElementById('signupName').classList.add('error');
    document.getElementById('signupName').focus();
    return;
  }
  
  if (!email) {
    emailError.classList.add('show');
    document.getElementById('signupEmail').classList.add('error');
    document.getElementById('signupEmail').focus();
    return;
  }
  
  if (pass.length < 8) {
    passwordError.classList.add('show');
    document.getElementById('signupPassword').classList.add('error');
    document.getElementById('signupPassword').focus();
    return;
  }

  btn.classList.add('loading');

  try {
    // Create user account
    const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
    const user = userCredential.user;

    // Update display name
    await updateProfile(user, {
      displayName: name
    });

    // Send verification email
    await sendEmailVerification(user, {
      url: window.location.origin + '/profile.html',
      handleCodeInApp: true
    });

    // Create user document in Firestore
    const userDocRef = doc(db, 'users', user.uid);
    await setDoc(userDocRef, {
      email: user.email,
      name: name,
      role: selectedSignupRole,
      subscriptionPlan: 'free',
      profileComplete: false,
      emailVerified: false,
      createdAt: new Date().toISOString(),
      photoURL: user.photoURL || null,
      status: 'active',
      listings: {
        active: 0,
        total: 0
      },
      stats: {
        totalViews: 0,
        inquiries: 0,
        sales: 0,
        alerts: 0,
        savedSearches: 0
      },
      profile: {
        bio: '',
        company: '',
        website: '',
        phone: '',
        location: 'Quezon City, Metro Manila, PH',
        verified: false
      }
    });

    console.log('‚úÖ User created successfully:', user.uid);
    console.log('üìß Verification email sent to:', user.email);
    
    btn.classList.remove('loading');
    
    // Show verification sent message
    document.getElementById('verificationSent').classList.add('show');
    
    // Sign out user until they verify
    await signOut(auth);
    
    // Switch to login form after 3 seconds
    setTimeout(() => {
      document.getElementById('verificationSent').classList.remove('show');
      switchToLogin();
      alert('‚úÖ Account created! Please check your email and click the verification link before logging in.');
    }, 3000);
    
  } catch (err) {
    btn.classList.remove('loading');
    let errorMsg = "Signup failed. Please try again.";
    
    if (err.code === 'auth/email-already-in-use') {
      errorMsg = "This email is already registered. Please log in.";
      emailError.innerHTML = '<i class="fa-solid fa-circle-exclamation"></i> ' + errorMsg;
      emailError.classList.add('show');
      document.getElementById('signupEmail').classList.add('error');
    } else if (err.code === 'auth/invalid-email') {
      errorMsg = "Invalid email address.";
      emailError.innerHTML = '<i class="fa-solid fa-circle-exclamation"></i> ' + errorMsg;
      emailError.classList.add('show');
      document.getElementById('signupEmail').classList.add('error');
    } else if (err.code === 'auth/weak-password') {
      errorMsg = "Password is too weak. Use at least 8 characters.";
      passwordError.innerHTML = '<i class="fa-solid fa-circle-exclamation"></i> ' + errorMsg;
      passwordError.classList.add('show');
      document.getElementById('signupPassword').classList.add('error');
    } else {
      alert(errorMsg);
    }
    
    console.error('Signup error:', err);
  }
});

// GOOGLE LOGIN - Variables
let googleRoleSelected = null;
let pendingGoogleUser = null;

// Role selection for Google login
window.selectGoogleRole = function(role) {
  googleRoleSelected = role;
  
  document.querySelectorAll('.google-role-card').forEach(card => {
    card.classList.remove('selected');
  });
  document.querySelector(`.google-role-card[data-role="${role}"]`).classList.add('selected');
  
  document.getElementById('confirmGoogleRole').disabled = false;
};

window.cancelGoogleLogin = async function() {
  document.getElementById('googleRoleModal').classList.remove('show');
  googleRoleSelected = null;
  pendingGoogleUser = null;
  
  // Sign out the pending user
  if (auth.currentUser) {
    await signOut(auth);
  }
  
  const btn = document.getElementById('googleLogin');
  btn.style.opacity = '1';
  btn.style.pointerEvents = 'auto';
};

// Confirm Google role and complete signup
document.getElementById('confirmGoogleRole').addEventListener('click', async () => {
  if (!googleRoleSelected || !pendingGoogleUser) return;
  
  const btn = document.getElementById('confirmGoogleRole');
  btn.disabled = true;
  btn.textContent = 'Creating account...';
  
  try {
    const userDocRef = doc(db, 'users', pendingGoogleUser.uid);
    
    await setDoc(userDocRef, {
      email: pendingGoogleUser.email,
      name: pendingGoogleUser.displayName || pendingGoogleUser.email.split('@')[0],
      role: googleRoleSelected,
      subscriptionPlan: 'free',
      profileComplete: false,
      createdAt: new Date().toISOString(),
      photoURL: pendingGoogleUser.photoURL || null,
      status: 'active',
      listings: {
        active: 0,
        total: 0
      },
      stats: {
        totalViews: 0,
        inquiries: 0,
        sales: 0,
        alerts: 0,
        savedSearches: 0
      },
      profile: {
        bio: '',
        company: '',
        website: '',
        phone: '',
        location: 'Quezon City, Metro Manila, PH',
        verified: false
      }
    });
    
    console.log('‚úÖ Google user created with role:', googleRoleSelected);
    
    document.getElementById('googleRoleModal').classList.remove('show');
    window.location.href = "profile.html";
    
  } catch (err) {
    console.error('Error creating Google user:', err);
    alert('Failed to create account. Please try again.');
    btn.disabled = false;
    btn.textContent = 'Continue';
  }
});

// GOOGLE LOGIN HANDLER
document.getElementById('googleLogin').addEventListener('click', async () => {
  const provider = new GoogleAuthProvider();
  provider.setCustomParameters({
    prompt: 'select_account'
  });
  
  const btn = document.getElementById('googleLogin');
  
  try {
    btn.style.opacity = '0.6';
    btn.style.pointerEvents = 'none';
    
    const result = await signInWithPopup(auth, provider);
    const user = result.user;
    
    console.log('‚úÖ Google sign-in successful:', user.email);
    
    // Check if user document exists
    const userDocRef = doc(db, 'users', user.uid);
    const userDoc = await getDoc(userDocRef);
    
    if (!userDoc.exists()) {
      // NEW USER - Show role selection modal
      pendingGoogleUser = user;
      googleRoleSelected = null;
      
      document.getElementById('confirmGoogleRole').disabled = true;
      document.querySelectorAll('.google-role-card').forEach(card => {
        card.classList.remove('selected');
      });
      
      document.getElementById('googleRoleModal').classList.add('show');
      
      btn.style.opacity = '1';
      btn.style.pointerEvents = 'auto';
      
    } else {
      // EXISTING USER - Normal login flow
      const userData = userDoc.data();
      
      if (userData.status === 'suspended') {
        await signOut(auth);
        alert('‚ö†Ô∏è Your account has been suspended. Please contact support.');
        btn.style.opacity = '1';
        btn.style.pointerEvents = 'auto';
        return;
      }
      
      if (userData.profileComplete !== true) {
        window.location.href = "profile.html";
      } else {
        window.location.href = "marketplace.html";
      }
    }
  } catch (err) {
    btn.style.opacity = '1';
    btn.style.pointerEvents = 'auto';
    
    console.error('‚ùå Google sign-in error:', err);
    
    if (err.code === 'auth/popup-closed-by-user') {
      return;
    } else if (err.code === 'auth/popup-blocked') {
      alert('Popup blocked. Please allow popups for this site and try again.');
    } else if (err.code === 'auth/cancelled-popup-request') {
      return;
    } else {
      alert('Google sign-in failed: ' + err.message);
    }
  }
});

// ==========================================
// Input focus effects
// ==========================================
document.querySelectorAll('.form-input').forEach(input => {
  input.addEventListener('focus', function() {
    this.parentElement.classList.add('focused');
  });
  
  input.addEventListener('blur', function() {
    this.parentElement.classList.remove('focused');
  });
});

// ==========================================
// LOGOUT FUNCTION (Global)
// ==========================================
window.logoutUser = async function() {
  try {
    await signOut(auth);
    window.location.href = "login.html";
  } catch (err) {
    console.error('Logout error:', err);
    alert("Logout failed: " + err.message);
  }
};

// ==========================================
// Console log for debugging
// ==========================================
console.log('üöÄ Systemly Enhanced Auth System Initialized');
console.log('üìä User data structure includes:');
console.log('- Complete profile fields');
console.log('- Listings tracking (active/total)');
console.log('- User stats (views, inquiries, sales, etc.)');
console.log('- Subscription plan management');
console.log('- Status tracking (active/suspended)');
</script>

</body>
</html>
